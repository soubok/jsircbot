/* ***** BEGIN LICENSE BLOCK *****
 * Version: GNU GPL 2.0
 *
 * The contents of this file are subject to the
 * GNU General Public License Version 2.0; you may not use this file except
 * in compliance with the License. You may obtain a copy of the License at
 * http://www.gnu.org/licenses/gpl.html
 *
 * Software distributed under the License is distributed on an "AS IS" basis,
 * WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License
 * for the specific language governing rights and limitations under the
 * License.
 * ***** END LICENSE BLOCK ***** */


(function testModule() {
	
	var _mod = this;
	
	var _botCmd = {

		raw:function( cmdName, cmdData, command, from, to, msg ) {
		
			_mod.Send( cmdData );
		},
		dump:function( cmdName, cmdData, command, from, to, msg ) {
			
			Print(dumpData(_mod.data), '\n');
			
		},
		quit:function() {
			
			_mod.api.Quit('bye...');
		},
		reload:function( cmdName, cmdData, command, from, to, msg ) {
			
			_mod.api.privmsg( to, 'Reloading ' + (cmdData||'') );
			if ( cmdData == undefined )
				core.ReloadModule(_mod); // after this, the current code will die
			else
				core.ReloadModuleByName(cmdData);

		},
		
		eval:function( cmdName, cmdData, command, from, to, msg ) {
			
			if( from != 'soubok!i=soubok@koe67-1-82-231-70-117.fbx.proxad.net' )
				return;
			
			var nick = from.split('!',1);
			var replyTo = to[0] == '#' ? to : nick;

			try {
				_mod.api.privmsg( replyTo, eval(cmdData) );
			} catch(ex) {
				_mod.api.privmsg( replyTo, ex );
			}
		},
		
		test:function( cmdName, cmdData, command, from, to, msg ) {
		
			DPrint( Array.slice(arguments).toSource() )
			
			var nick = from.split('!',1);
			var replyTo = to[0] == '#' ? to : nick;
			
			

//			for ( var i = 0; i<100; i++ ) _mod.api.privmsg( nick, 'XxxxxxxxXxxxxxxxXxxxxxxxXxxxx '+i );
			_mod.api.privmsg( to, core.ModuleList() );
//			_mod.api.privmsg( replyTo, new Date() );
//			_mod.api.privmsg( to, Array.slice(arguments).toSource() );
		}

	}

	this.AddModuleListeners = function() _mod.api.botCmd.AddSet( _botCmd );
	this.RemoveModuleListeners = function() _mod.api.botCmd.RemoveSet( _botCmd );

/*
		addDataListener( _module.data.channel['#jslibs'].names['soubok'], function(info) {
			_module.Send( 'PRIVMSG soubok :hi! ('+info+')' );
//			_module.Send( 'PRIVMSG soubok :'+_module.api.Ctcp('VERSION') );
		});
*/

})
